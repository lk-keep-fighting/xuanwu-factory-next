# Dockeré•œåƒæ›´æ–°ä¸ºå®˜æ–¹ç‰ˆæœ¬

## ğŸ¯ æ›´æ–°æ¦‚è¿°

å°†Jenkins Java JARæ„å»ºè„šæœ¬ä¸­çš„ç§æœ‰é•œåƒåœ°å€æ›´æ–°ä¸ºå®˜æ–¹Docker Hubé•œåƒï¼Œç¡®ä¿æ„å»ºç¯å¢ƒçš„å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚

## ğŸ”„ æ›´æ–°å†…å®¹

### ä¿®æ”¹å‰ï¼ˆç§æœ‰é•œåƒï¼‰
```groovy
switch(javaVersion) {
  case '8':
    env.BUILD_IMAGE = 'nexus.aimstek.cn/aims-common/maven:3.9-eclipse-temurin-8'
    env.GRADLE_IMAGE = 'nexus.aimstek.cn/aims-common/gradle:8.4-jdk8'
    break
  case '11':
    env.BUILD_IMAGE = 'nexus.aimstek.cn/aims-common/maven:3.9-eclipse-temurin-11'
    env.GRADLE_IMAGE = 'nexus.aimstek.cn/aims-common/gradle:8.4-jdk11'
    break
  // ... å…¶ä»–ç‰ˆæœ¬
}
```

### ä¿®æ”¹åï¼ˆå®˜æ–¹é•œåƒï¼‰
```groovy
switch(javaVersion) {
  case '8':
    env.BUILD_IMAGE = 'maven:3.9-eclipse-temurin-8'
    env.GRADLE_IMAGE = 'gradle:8.4-jdk8'
    break
  case '11':
    env.BUILD_IMAGE = 'maven:3.9-eclipse-temurin-11'
    env.GRADLE_IMAGE = 'gradle:8.4-jdk11'
    break
  // ... å…¶ä»–ç‰ˆæœ¬
}
```

## ğŸ“‹ æ›´æ–°çš„é•œåƒåˆ—è¡¨

### Mavenæ„å»ºé•œåƒ
| Javaç‰ˆæœ¬ | å®˜æ–¹é•œåƒ |
|---------|---------|
| Java 8  | `maven:3.9-eclipse-temurin-8` |
| Java 11 | `maven:3.9-eclipse-temurin-11` |
| Java 17 | `maven:3.9-eclipse-temurin-17` â­ (é»˜è®¤) |
| Java 21 | `maven:3.9-eclipse-temurin-21` |

### Gradleæ„å»ºé•œåƒ
| Javaç‰ˆæœ¬ | å®˜æ–¹é•œåƒ |
|---------|---------|
| Java 8  | `gradle:8.4-jdk8` |
| Java 11 | `gradle:8.4-jdk11` |
| Java 17 | `gradle:8.4-jdk17` â­ (é»˜è®¤) |
| Java 21 | `gradle:8.4-jdk21` |

### å·¥å…·é•œåƒ
| ç”¨é€” | å®˜æ–¹é•œåƒ |
|-----|---------|
| æ–‡ä»¶ä¸Šä¼  | `curlimages/curl:latest` |

## âœ… ä¼˜åŠ¿

### 1. å¯ç”¨æ€§ä¿è¯
- **å®˜æ–¹ç»´æŠ¤**: Docker Hubå®˜æ–¹é•œåƒï¼ŒæŒç»­ç»´æŠ¤å’Œæ›´æ–°
- **é«˜å¯ç”¨æ€§**: å…¨çƒCDNåˆ†å‘ï¼Œä¸‹è½½é€Ÿåº¦å¿«
- **æ— ä¾èµ–**: ä¸ä¾èµ–ç§æœ‰é•œåƒä»“åº“çš„å¯ç”¨æ€§

### 2. å®‰å…¨æ€§æå‡
- **å®˜æ–¹ç­¾å**: é•œåƒç»è¿‡å®˜æ–¹ç­¾åéªŒè¯
- **å®‰å…¨æ‰«æ**: å®šæœŸè¿›è¡Œå®‰å…¨æ¼æ´æ‰«æ
- **é€æ˜åº¦**: æ„å»ºè¿‡ç¨‹å’Œå†…å®¹å®Œå…¨é€æ˜

### 3. ç»´æŠ¤ç®€åŒ–
- **æ ‡å‡†åŒ–**: ä½¿ç”¨ä¸šç•Œæ ‡å‡†é•œåƒ
- **æ–‡æ¡£å®Œå–„**: å®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ
- **ç‰ˆæœ¬ç®¡ç†**: æ¸…æ™°çš„ç‰ˆæœ¬æ ‡ç­¾å’Œç”Ÿå‘½å‘¨æœŸ

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### é•œåƒç‰¹æ€§
- **Eclipse Temurin**: åŸºäºEclipse Temurin JDKï¼Œæ€§èƒ½ä¼˜åŒ–
- **Maven 3.9**: æœ€æ–°ç¨³å®šç‰ˆMavenï¼Œæ”¯æŒæ‰€æœ‰ç°ä»£Javaç‰¹æ€§
- **Gradle 8.4**: æœ€æ–°ç¨³å®šç‰ˆGradleï¼Œæ„å»ºæ€§èƒ½ä¼˜åŒ–

### å…¼å®¹æ€§
- **å‘åå…¼å®¹**: ä¸ç°æœ‰æ„å»ºè„šæœ¬å®Œå…¨å…¼å®¹
- **åŠŸèƒ½ä¸€è‡´**: æä¾›ç›¸åŒçš„æ„å»ºåŠŸèƒ½å’Œå·¥å…·
- **ç¯å¢ƒä¸€è‡´**: ä¿æŒæ„å»ºç¯å¢ƒçš„ä¸€è‡´æ€§

## ğŸ§ª éªŒè¯ç»“æœ

é€šè¿‡è‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯äº†æ›´æ–°æ•ˆæœï¼š

```
ğŸ³ Testing Docker Images Fix...

1. Checking for private registry Docker images...
âœ… No private Docker image references found

2. Checking for official Docker Hub images...
âœ… All official Docker Hub images present

3. Checking Java version to image mapping...
âœ… All Java version mappings correct

4. Checking default images...
âœ… Default images set to Java 17

5. Checking curl image...
âœ… Curl image is official

ğŸ‰ All Docker images successfully updated to official versions!
```

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

- âœ… `doc/jenkins/è„šæœ¬/build-java-jar` - æ›´æ–°äº†æ‰€æœ‰æ„å»ºé•œåƒä¸ºå®˜æ–¹ç‰ˆæœ¬

## ğŸš€ éƒ¨ç½²å»ºè®®

### 1. ç«‹å³ç”Ÿæ•ˆ
- æ›´æ–°åçš„è„šæœ¬å¯ä»¥ç«‹å³ä½¿ç”¨
- æ— éœ€é¢å¤–é…ç½®æˆ–ä¾èµ–å®‰è£…

### 2. é¦–æ¬¡æ„å»º
- é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½å®˜æ–¹é•œåƒ
- ä¸‹è½½æ—¶é—´å–å†³äºç½‘ç»œç¯å¢ƒ
- åç»­æ„å»ºä¼šä½¿ç”¨æœ¬åœ°ç¼“å­˜

### 3. ç›‘æ§å»ºè®®
- å…³æ³¨é¦–æ¬¡æ„å»ºçš„é•œåƒä¸‹è½½è¿‡ç¨‹
- éªŒè¯æ„å»ºåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- æ£€æŸ¥æ„å»ºæ—¶é—´æ˜¯å¦åœ¨é¢„æœŸèŒƒå›´å†…

## ğŸ”„ å›æ»šæ–¹æ¡ˆ

å¦‚æœéœ€è¦å›æ»šåˆ°ç§æœ‰é•œåƒï¼ˆä¸æ¨èï¼‰ï¼Œå¯ä»¥ï¼š

1. æ¢å¤ç§æœ‰é•œåƒåœ°å€
2. ç¡®ä¿ç§æœ‰é•œåƒä»“åº“å¯è®¿é—®
3. æ›´æ–°JenkinsèŠ‚ç‚¹çš„é•œåƒæ‹‰å–æƒé™

## ğŸ“Š æ€§èƒ½å½±å“

### é¢„æœŸæ”¹è¿›
- **ä¸‹è½½é€Ÿåº¦**: Docker Hub CDNé€šå¸¸æ¯”ç§æœ‰ä»“åº“æ›´å¿«
- **ç¼“å­˜æ•ˆç‡**: å®˜æ–¹é•œåƒæ›´å®¹æ˜“åœ¨å¤šä¸ªé¡¹ç›®é—´å…±äº«ç¼“å­˜
- **ç¨³å®šæ€§**: å‡å°‘å› ç§æœ‰ä»“åº“ä¸å¯ç”¨å¯¼è‡´çš„æ„å»ºå¤±è´¥

### æ³¨æ„äº‹é¡¹
- **é¦–æ¬¡ä¸‹è½½**: é¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦ä¸‹è½½é•œåƒ
- **ç½‘ç»œä¾èµ–**: ä¾èµ–å¤–ç½‘è®¿é—®Docker Hub
- **é•œåƒå¤§å°**: å®˜æ–¹é•œåƒå¯èƒ½æ¯”å®šåˆ¶é•œåƒç¨å¤§

## ğŸ‰ æ€»ç»“

é€šè¿‡å°†æ„å»ºé•œåƒæ›´æ–°ä¸ºå®˜æ–¹Docker Hubç‰ˆæœ¬ï¼Œæå‡äº†Java JARæ„å»ºåŠŸèƒ½çš„ï¼š

- âœ… **å¯é æ€§**: ä¸å†ä¾èµ–ç§æœ‰é•œåƒä»“åº“
- âœ… **å®‰å…¨æ€§**: ä½¿ç”¨å®˜æ–¹ç»´æŠ¤çš„å®‰å…¨é•œåƒ
- âœ… **å¯ç»´æŠ¤æ€§**: æ ‡å‡†åŒ–çš„é•œåƒå’Œå·¥å…·é“¾
- âœ… **å…¼å®¹æ€§**: ä¿æŒæ‰€æœ‰ç°æœ‰åŠŸèƒ½ä¸å˜

ç°åœ¨Jenkinsæ„å»ºå¯ä»¥æ›´ç¨³å®šåœ°è¿è¡Œï¼Œç”¨æˆ·å¯ä»¥æ”¾å¿ƒä½¿ç”¨Java JARæ„å»ºåŠŸèƒ½ã€‚